#+BEGIN_COMMENT
.. title: CUDA Notes
.. slug: cuda
.. date: 11/01/2014
.. tags: 
.. link: linux, cuda, parallel processing
.. description: Notes on NVIDIA's CUDA
.. type: text
#+END_COMMENT
#+OPTIONS: toc:nil num:t ^:nil
#+TOC: headlines 3

* Pre-installation of CUDA software

** Check for a CUDA-enabled card
   /Sources/
   1. http://docs.nvidia.com/cuda/cuda-getting-started-guide-for-linux/#axzz3qFKp3T3Z
   2. https://developer.nvidia.com/cuda-gpus

   To check for a CUDA card in Linux, use the command:

   #+BEGIN_SRC sh
lspci | grep -i nvidia
   #+END_SRC

   On my laptop, I get the following output:

   #+BEGIN_SRC sh
01:00.0 VGA compatible controller: NVIDIA Corporation GF108M [GeForce GT 555M] (rev a1)
   #+END_SRC

   I checked that the GeForce GT 555m was CUDA-capable at NVIDIA's
   website listing all CUDA GPU's (see link above). While it's
   certainly not a new GPU card, it is CUDA-enabled with Compute
   Capability 2.1.

-----

* Installation of the CUDA Development Kit on Debian

** Installation of the CUDA driver
   /Sources/
   1. https://wiki.debian.org/NvidiaGraphicsDrivers
   2. https://wiki.debian.org/Bumblebee
   3. http://linuxconfig.org/nvidia-geforce-driver-installation-on-debian-jessie-linux-8-64bit
   4. https://packages.debian.org/jessie/devel/nvidia-cuda-toolkit

   I mostly followed the directions at the first link above. However,
   it took me a few days of failure to realize that the Nvidia card on
   my laptop was using Nvidia Optimus, and thus required a specialized
   set of drivers known as bumblebee. Before I realized this, I would
   install the nvidia-driver package and boot to a black screen with a
   single, blinking cursor. This is the result of creating an
   xorg.conf file inside =/etc/X11/=, as cautioned on the Debian Wiki.

   Luckily, the installation of the proper Nvidia drivers proceeded
   smoothly in Debian Jessie once I realized that everything is passed
   through my Intel video card and therefore requires bumblebee.

   The first indication that you might require bumblbee comes from probing for VGA devices using PCI buses.

#+BEGIN_SRC sh
lspci | grep VGA
#+END_SRC

   I get the following result:

#+BEGIN_SRC sh
00:02.0 VGA compatible controller: Intel Corporation 2nd Generation Core Processor Family Integrated Graphics Controller (rev 09)
01:00.0 VGA compatible controller: NVIDIA Corporation GF108M [GeForce GT 555M] (rev ff)
#+END_SRC

   The result on the top line suggests that I need bumblebee because
   there is an Intel integrated graphics card in my laptop.

   Next, I installed bumblebee using

#+BEGIN_SRC sh
sudo apt-get install bumblebee-nvidia primus
#+END_SRC

   After a system restart, I tested that the driver installed
   correctly using the glxgears example:

#+BEGIN_SRC sh
sudo optirun glxgears -info
#+END_SRC

   This opens a window of three gears, green, blue and red, that are
   turning, which I believe indicates that the Nvidia card is doing
   the work in rendering them.

-----

** Installation using a stand-alone install
   /Sources/
   1. https://www.quantstart.com/articles/Installing-Nvidia-cuda-on-Ubuntu-14-04-for-Linux-GPU-Computing

   I have not yet tried the stand-alone install, though I did find
   rather good notes on doing it in Ubuntu 14.04 at the link above.
